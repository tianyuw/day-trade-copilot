# 项目提案：0DTE Copilot (v1.0)

## 1. 项目概览
0DTE Copilot 这是一个智能股票监控系统，旨在通过实时分析 1 分钟 K 线图来辅助交易者。它利用 **Gemini 3 Pro** 的多模态能力来解读市场数据、技术指标和可视化图表，从而提供预测性见解和可执行的交易信号。

## 2. 核心功能

### 2.1 持续 AI 分析
- **模型**: Google Gemini 3 Pro (多模态)。
- **频率**: 系统对每只受监控的股票每分钟调用一次 LLM。
- **上下文窗口**: 每次 API 调用都包含 LLM 在**过去 30 分钟**内的分析/判断，以确保推理的一致性和趋势跟踪。

### 2.2 多模态输入数据
在每个分析周期中，LLM 将接收：
1. **市场数据**: 1 分钟 OHLCV (开盘价、最高价、最低价、收盘价、成交量) 数据。
2. **技术指标**:
   - EMA9 (9日指数移动平均线)
   - EMA21 (21日指数移动平均线)
   - Volume (成交量)
   - VWAP (成交量加权平均价)
   - Bollinger Bands (布林带)
3. **视觉数据**: 生成的 K 线图图片，图上叠加了上述技术指标以及计算出的支撑位/压力位。

### 2.3 预测输出与可执行情报
LLM 的任务包括：
- **形态识别**: 识别当前 K 线技术形态。
- **趋势预测**: 预测下一分钟可能的走势。
- **突破检测**: 识别潜在的突破位置。
- **行动计划**: 生成具体的、有条件的执行步骤 (例如：*"如果下一分钟 K 线突破 345.50，则执行买入指令"*)。

### 2.4 实时执行监控
- 一个独立的、高频进程负责监控**秒级别**的 K 线数据。
- 该进程解析 LLM 提供的“行动计划”。
- 如果实时市场条件满足 LLM 给出的条件，系统会立即通过弹窗或通知的形式提示用户。

### 2.5 回测引擎
- 支持“时光机”模式。
- 用户可以输入特定的股票代码 (Ticker) 和过去的时间戳。
- 系统从该时间点开始重放历史数据，模拟实时环境以验证 AI 的表现。

## 3. 数据基础设施
- **提供商**: [Massive](https://massive.com/docs/websocket/stocks/overview)
- **技术**: WebSocket (流式传输)。
- **数据流**:
  - **分钟聚合 (Minute Aggregates)**: 用于核心 AI 分析循环。
  - **秒级聚合 (Second Aggregates)**: 用于实时执行监控循环。

## 4. 系统架构
1. **数据摄取层**: 管理与 Massive 的 WebSocket 连接以获取实时数据流。
2. **处理层**:
   - 实时计算技术指标。
   - 为视觉模型渲染图表图片。
   - 管理 30 分钟滑动窗口的 AI 历史记录。
3. **AI 编排器**: 处理对 Gemini 3 Pro 的异步调用。
4. **信号监控器**: 一个轻量级、低延迟的服务，用于将实时秒级数据与 AI 生成的触发条件进行比对。
5. **用户界面**: 处理输入 (股票代码、回测日期) 并显示通知。
